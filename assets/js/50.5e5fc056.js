(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{400:function(s,e,n){"use strict";n.r(e);var a=n(41),t=Object(a.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("::: tip\nðŸ’¡ Learn more : "),n("a",{attrs:{href:"https://docs.microsoft.com/azure/cloud-shell/overview?WT.mc_id=docs-azuredevtips-micrum",target:"_blank",rel:"noopener noreferrer"}},[s._v("Overview of Azure Cloud Shell"),n("OutboundLink")],1),s._v(".")]),s._v(" "),n("p",[s._v("ðŸ“º Watch the video : "),n("a",{attrs:{href:"https://www.youtube.com/watch?v=16bUZ43CGxs&list=PLLasX02E8BPCNCK8Thcxu-Y-XcBUbhFWC&index=12?WT.mc_id=youtube-azuredevtips-micrum",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to generate SSH public key to log into Linux VM"),n("OutboundLink")],1),s._v(".\n:::")]),s._v(" "),n("h4",{attrs:{id:"generate-ssh-keys-to-log-into-linux-vm-with-cloud-shell"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#generate-ssh-keys-to-log-into-linux-vm-with-cloud-shell"}},[s._v("#")]),s._v(" Generate SSH keys to log into Linux VM with Cloud Shell")]),s._v(" "),n("p",[s._v("For these instructions, I'll assume you have a Linux VM already setup and connecting via Cloud Shell.")]),s._v(" "),n("p",[s._v("1.) Log into Azure Cloud Shell and type "),n("code",[s._v("ssh-keygen -t rsa -b 2048")]),s._v(". Accept all default by pressing enter. It has generated a public key that is stored in "),n("code",[s._v("/home/michael/.ssh/id_rsa.pub.")]),s._v(" as shown below.")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("michael@Azure:~/clouddrive$ ssh-keygen -t rsa -b 2048\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/michael/.ssh/id_rsa):\nCreated directory '/home/michael/.ssh'.\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /home/michael/.ssh/id_rsa.\nYour public key has been saved in /home/michael/.ssh/id_rsa.pub.\nThe key fingerprint is:\nSHA256:FHZVjZfU0zZaXoEvbg37/YUW+02VMIXl6UtUIumpHs0 michael@cc-72f9-63c154d-32136390-qk3bs\nThe key's randomart image is:\n+---[RSA 2048]----+\n|        o ..ooBB*|\n|       . o  .++*X|\n|        .  . +=*+|\n|       .    o+=o.|\n|        S  +. *+.|\n|          o E+.=o|\n|         . .. =.+|\n|          .  . ++|\n|                =|\n+----[SHA256]-----+\nmichael@Azure:~/clouddrive$\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[s._v("2.) Ensure the key was generated by typing "),n("code",[s._v("ls -a")]),s._v(".")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("michael@Azure:~$ ls -a\n.  ..  .azure  .bash_history  .bash_logout  .bashrc  clouddrive  .profile  .ssh\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("3.) Looks good (we see "),n("code",[s._v(".ssh")]),s._v("), we'll go ahead and copy it to our server with "),n("code",[s._v("ssh-copy-id user@ipaddy:")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("michael@Azure:~$ ssh-copy-id user@ipaddy\nmbcrump@52.161.31.243's password:\nid_rsa.pub                                                                                                                                                                                                               100%  420     0.4KB/s   00:00\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("4.) SSH to the Linux server with "),n("code",[s._v("ssh user@ipaddy")]),s._v(".")]),s._v(" "),n("p",[s._v("5.) Edit the ssh server configuration file with "),n("code",[s._v("sudo nano /etc/ssh/sshd_config")]),s._v(".")]),s._v(" "),n("p",[s._v("5.1) These entries must be set to yes and they should already be that way by default:\nRSAAuthentication yes\nPubkeyAuthentication yes")]),s._v(" "),n("p",[s._v("6.) Reload the configuration with "),n("code",[s._v("sudo service ssh reload")]),s._v(".")]),s._v(" "),n("p",[s._v("7.) Disconnect and try to connect without the need to give the password to the ssh-client "),n("code",[s._v("ssh user@ipaddy")]),s._v(".")]),s._v(" "),n("p",[s._v("8.) If everything goes as planned, you should see:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("michael@Azure:~$ ssh user@ipaddy\nWelcome to Ubuntu 16.04.3 LTS (GNU/Linux 4.4.0-92-generic x86_64)\n\t\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\t\n  Get cloud support with Ubuntu Advantage Cloud Guest:\n    http://www.ubuntu.com/business/services/cloud\n\t\n15 packages can be updated.\n0 updates are security updates.\n\t\n\t\n*** System restart required ***\nLast login: Sun Sep 10 23:49:35 2017 from 40.83.147.69\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("img",{attrs:{src:s.$withBase("/files/cloudshellpersistdata.gif")}}),s._v(" "),n("h4",{attrs:{id:"bonus-if-you-want-to-disable-the-password-you-previously-set-on-the-linux-machine"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bonus-if-you-want-to-disable-the-password-you-previously-set-on-the-linux-machine"}},[s._v("#")]),s._v(" BONUS: If you want to disable the password you previously set on the Linux machine")]),s._v(" "),n("p",[s._v("If you want to disable the password on the Linux machine that you previously set:")]),s._v(" "),n("p",[s._v("1.) SSH back into the machine with "),n("code",[s._v("ssh user@ipaddy")]),s._v(".")]),s._v(" "),n("p",[s._v("2.) Disable password authentication with "),n("code",[s._v("sudo nano /etc/ssh/sshd_config")]),s._v(".")]),s._v(" "),n("p",[s._v("2.1) Ensure the following settings should are set to no:")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("ChallengeResponseAuthentication no\nPasswordAuthentication no\nUsePAM no\n")])])]),n("p",[s._v("2.2.) Reload the configuration with "),n("code",[s._v("sudo service ssh reload")])]),s._v(" "),n("p",[s._v("3.) You can see if the password authentication is disabled by logging out and then trying to connect with key file authentication disabled with "),n("code",[s._v("ssh user@ipaddress -o PubkeyAuthentication=no")]),s._v('. You should get "Permission denied".')]),s._v(" "),n("h4",{attrs:{id:"bonus-2-you-can-easily-do-the-same-with-bash-on-windows-10"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bonus-2-you-can-easily-do-the-same-with-bash-on-windows-10"}},[s._v("#")]),s._v(" BONUS #2: You can easily do the same with BASH on Windows 10")]),s._v(" "),n("p",[s._v("You can have the same goodness that you have with Azure Cloud Shell on your local machine. In my case, I'm using BASH on Windows and can just run steps 1-5 listed above. Boom!")])])}),[],!1,null,null,null);e.default=t.exports}}]);