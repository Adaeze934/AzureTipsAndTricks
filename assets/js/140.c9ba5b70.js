(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{500:function(e,t,n){"use strict";n.r(t);var s=n(41),a=Object(s.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[e._v("::: tip")]),e._v(" "),n("p",[e._v("ðŸ’¡ Learn more : "),n("a",{attrs:{href:"https://docs.microsoft.com/en-us/rest/api/?view=Azure",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure REST API Browser"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v(":::")]),e._v(" "),n("p",[e._v("This post was brought to you by "),n("strong",[n("a",{attrs:{href:"https://twitter.com/kumarallamraju",target:"_blank",rel:"noopener noreferrer"}},[e._v("Kumar Allamraju"),n("OutboundLink")],1)]),e._v(".")]),e._v(" "),n("h4",{attrs:{id:"azure-rest-apis-with-postman"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#azure-rest-apis-with-postman"}},[e._v("#")]),e._v(" Azure REST APIs with Postman")]),e._v(" "),n("p",[e._v("Postman is a powerful tool for performing integration testing with your APIs. It allows us to perform repeatable, reliable tests that can be automated and used in a variety of environments and includes useful tools for persisting data and simulating how a user might actually be interacting with the system. In this article we will demonstrate how to use Postman to test/validate the REST APIs.")]),e._v(" "),n("ol",[n("li",[n("p",[e._v("Download and install the "),n("a",{attrs:{href:"https://www.getpostman.com/downloads/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Postman"),n("OutboundLink")],1),e._v(" native app for your operating system")])]),e._v(" "),n("li",[n("p",[e._v('Launch the postman app and create a new environment for this project. I named it as "azuretips". To learn more about creating an environment refer to this '),n("a",{attrs:{href:"https://learning.getpostman.com/docs/postman/environments_and_globals/manage_environments/",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),n("OutboundLink")],1)])]),e._v(" "),n("li",[n("p",[e._v("Create a service principal from your Azure Cloud Shell.  This way you don't have to install Azure CLI in your local desktop.")])])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('az ad sp create-for-rbac -n "your service principal name"\n\ne.g. az ad sp create-for-rbac -n "azuretips"\nCreating a role assignment under the scope of "/subscriptions/11389280-b2a2-***********"\n  Retrying role assignment creation: 1/36\n  Retrying role assignment creation: 2/36\n  Retrying role assignment creation: 3/36\n{\n  "appId": "d2846107-f7ae-439b-8a16-da440d52e950",\n  "displayName": "azuretips",\n  "name": "http://azuretips",\n  "password": "00593485-8bda-4c2b-8c4e-2ab52241c24c",\n  "tenant": "72f98xxx-86f1-41af-****"\n}\n\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[e._v("To get your azure subscription id execute the following command in your cloud shell")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('az account show --query id\n"11389280-b2a2-4183-b757-xxxxxx"\n\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[e._v('Input the tenantid (tenant), clientid (appId), clientsecret (password), subid (subscription ID) in postman\'s "azuretips" environment section that was created in Step # 2. See the screenshot below')])]),e._v(" "),n("img",{attrs:{src:e.$withBase("/files/azurepostman-file1.jpg")}}),e._v(" "),n("ol",{attrs:{start:"6"}},[n("li",[n("p",[e._v("Create a new collection in your postman app to store all your REST calls in an isolated section. To learn more about collections in postman, refer to this "),n("a",{attrs:{href:"https://learning.getpostman.com/docs/postman/launching_postman/creating_the_first_collection/",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),n("OutboundLink")],1)])]),e._v(" "),n("li",[n("p",[e._v("We need to get the bearer token before executing any Azure REST API calls.")])]),e._v(" "),n("li",[n("p",[e._v("Issue a POST request to")])])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("https://login.microsoftonline.com/:tenantid/oauth2/token \n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("p",[e._v("with the following details")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('\t- Params Tab >> Path Variables.\n\n\tKey: tenantid\n\tValue: {{tenantid}}\n\t\n\t- Authroization Tab\n\n\tType: Inherit auth from parent\n\t\n\t- Headers Tab\n\n\tContent-Type: application/x-www-form-urlencoded\n\t\n\t-  Body tab\n\n\tgrant_type: client_credentials\n\tclient_id: {{clientid}}\n\tclient_secret: {{clientsecret}}\n\tresource: https://management.azure.com/\n\t\n\t- following value in the Tests tab\n\tpm.environment.set("bearerToken", pm.response.json().access_token);\n\t\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br")])]),n("img",{attrs:{src:e.$withBase("/files/azurepostman-file2.jpg")}}),e._v(" "),n("img",{attrs:{src:e.$withBase("/files/azurepostman-file3.jpg")}}),e._v(" "),n("p",[e._v("You might be thinking this is a lot of work. But this is just a one time setup in Postman and you can share,re-use or duplicate this environment with your co-workers.")]),e._v(" "),n("p",[e._v("After getting the bearer token you can execute the Azure REST APIs for getting Resource Groups, details about a particular Resource Group, VNets etc..")]),e._v(" "),n("p",[e._v('As an example I issued a GET request to get details about a resource group in my azure subscription. In the Header section add a key "Authorization" with value Bearer '+e._s(e.bearerToken))]),e._v(" "),n("p",[e._v("See the screenshot below")]),e._v(" "),n("img",{attrs:{src:e.$withBase("/files/azurepostman-file4.jpg")}}),e._v(" "),n("p",[e._v("Pls review this page to use the right GET or POST requests for "),n("a",{attrs:{href:"https://docs.microsoft.com/en-us/rest/api/?view=Azure",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure REST APIs"),n("OutboundLink")],1)]),e._v(" "),n("h4",{attrs:{id:"conclusion"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#conclusion"}},[e._v("#")]),e._v(" Conclusion")]),e._v(" "),n("p",[e._v("Postman is a comprehensive API testing tool that makes it easy to set up automated tests. You can aggregate the tests and requests youâ€™ve created into a single automated test sequence. It is the only complete API development and testing environment and provides a single source of truth to your organization. In this article we learned how to use Postman with Azure REST APIs.")]),e._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://www.getpostman.com/automated-testing?_ga=2.53476456.151619731.1566574042-329050526.1563821057",target:"_blank",rel:"noopener noreferrer"}},[e._v("Postman"),n("OutboundLink")],1)])]),e._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://docs.microsoft.com/en-us/rest/api/?view=Azure",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure REST APIs"),n("OutboundLink")],1)])])])])}),[],!1,null,null,null);t.default=a.exports}}]);