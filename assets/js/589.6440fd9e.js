(window.webpackJsonp=window.webpackJsonp||[]).push([[589],{858:function(e,t,o){"use strict";o.r(t);var r=o(13),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),o("p",[e._v("ðŸ”¥ Checkout the Azure Developer page at "),o("a",{attrs:{href:"https://azure.com/developer?WT.mc_id=azure-azuredevtips-azureappsdev",target:"_blank",rel:"noopener noreferrer"}},[e._v("azure.com/developer"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("p",[e._v("ðŸ’¡ Learn more : "),o("a",{attrs:{href:"https://docs.microsoft.com/azure/cosmos-db/introduction?WT.mc_id=docs-azuredevtips-azureappsdev",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure Cosmos DB Overview"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("p",[e._v("ðŸ“º Watch the video : "),o("a",{attrs:{href:"https://www.youtube.com/watch?v=7gdB_PHhACw?WT.mc_id=youtube-azuredevtips-azureappsdev",target:"_blank",rel:"noopener noreferrer"}},[e._v("How to choose a partition key in Azure Cosmos DB"),o("OutboundLink")],1),e._v(".")])]),e._v(" "),o("h3",{attrs:{id:"how-to-choose-a-partition-key-in-azure-cosmos-db"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#how-to-choose-a-partition-key-in-azure-cosmos-db"}},[e._v("#")]),e._v(" How to choose a partition key in Azure Cosmos DB")]),e._v(" "),o("h4",{attrs:{id:"azure-cosmos-db-is-highly-scalable"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#azure-cosmos-db-is-highly-scalable"}},[e._v("#")]),e._v(" Azure Cosmos DB is highly scalable")]),e._v(" "),o("p",[e._v("One of the best features of "),o("a",{attrs:{href:"https://docs.microsoft.com/azure/cosmos-db/introduction?WT.mc_id=docs-azuredevtips-azureappsdev",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure Cosmos DB"),o("OutboundLink")],1),e._v(" is that it's incredibly fast. And that is because it uses a "),o("a",{attrs:{href:"https://docs.microsoft.com/azure/cosmos-db/partitioning-overview?WT.mc_id=docs-azuredevtips-azureappsdev",target:"_blank",rel:"noopener noreferrer"}},[e._v("partitioning system"),o("OutboundLink")],1),e._v(" to scale, which consists of physical and logical partitions.")]),e._v(" "),o("p",[e._v("To optimize the scalability and performance of Azure Cosmos DB, you need to choose the right "),o("a",{attrs:{href:"https://docs.microsoft.com/azure/cosmos-db/partitioning-overview#choose-partitionkey?WT.mc_id=docs-azuredevtips-azureappsdev",target:"_blank",rel:"noopener noreferrer"}},[e._v("partition key"),o("OutboundLink")],1),e._v(" for your container. In this post, we'll go through the best practices to choose your partition key.")]),e._v(" "),o("h4",{attrs:{id:"prerequisites"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),o("p",[e._v("If you want to follow along, you'll need the following:")]),e._v(" "),o("ul",[o("li",[e._v("An Azure subscription (If you don't have an Azure subscription, create a "),o("a",{attrs:{href:"https://azure.microsoft.com/free/?WT.mc_id=azure-azuredevtips-azureappsdev",target:"_blank",rel:"noopener noreferrer"}},[e._v("free account"),o("OutboundLink")],1),e._v(" before you begin)")])]),e._v(" "),o("h4",{attrs:{id:"choosing-your-partition-key"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#choosing-your-partition-key"}},[e._v("#")]),e._v(" Choosing your partition key")]),e._v(" "),o("p",[e._v("You choose a partition key when you create a container in Azure Cosmos DB. Note that you can't change the partition key of a container. If you do need to change it, you need to migrate the container data to a new container with the correct key.")]),e._v(" "),o("img",{attrs:{src:e.$withBase("/files/119create.png"),width:"75%"}}),e._v(" "),o("p",[e._v('A partition key consists of a path, like "/firstname", or "/name/first". You can use alphanumeric and underscore characters in the path.')]),e._v(" "),o("img",{attrs:{src:e.$withBase("/files/119path.png"),width:"25%"}}),e._v(" "),o("p",[e._v("The partition key needs to be a JSON property in the documents that you store in the container. So in the JSON snippet below, the partition key path could, for instance, be "),o("strong",[e._v("firstname")]),e._v(".")]),e._v(" "),o("div",{staticClass:"language- line-numbers-mode"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('{\n    "firstname": "VÃ©ronique",\n    "age": 50,\n    "id": "61fb344e-279d-4185-957d-e88bb1101dba",\n    "_rid": "mYw7AJk8AbkDAAAAAAAAAA==",\n    "_self": "dbs/mYw7AA==/colls/mYw7AJk8Abk=/docs/mYw7AJk8AbkDAAAAAAAAAA==/",\n    "_etag": "\\"03000091-0000-0700-0000-607d80580000\\"",\n    "_attachments": "attachments/",\n    "_ts": 1618837592\n}\n')])]),e._v(" "),o("div",{staticClass:"line-numbers-wrapper"},[o("span",{staticClass:"line-number"},[e._v("1")]),o("br"),o("span",{staticClass:"line-number"},[e._v("2")]),o("br"),o("span",{staticClass:"line-number"},[e._v("3")]),o("br"),o("span",{staticClass:"line-number"},[e._v("4")]),o("br"),o("span",{staticClass:"line-number"},[e._v("5")]),o("br"),o("span",{staticClass:"line-number"},[e._v("6")]),o("br"),o("span",{staticClass:"line-number"},[e._v("7")]),o("br"),o("span",{staticClass:"line-number"},[e._v("8")]),o("br"),o("span",{staticClass:"line-number"},[e._v("9")]),o("br"),o("span",{staticClass:"line-number"},[e._v("10")]),o("br")])]),o("p",[e._v("So how do you pick the best partition key for your container?")]),e._v(" "),o("ol",[o("li",[e._v("You should pick a property that you do not update later")]),e._v(" "),o("li",[e._v("The partition key should be a property that exists in every document in the container")]),e._v(" "),o("li",[e._v('The partition key property should have a large range of possible values. This optimizes the amount of logical partitions that the key creates. "id" has a lot of values')]),e._v(" "),o("li",[e._v("The value of the partition key can be of string or numeric types")])]),e._v(" "),o("p",[e._v('Here\'s the exception to the best practices above: If your container is large and read-heavy (i.e., more then 30.000RUs and larger than 100GB), the key should be something that is often filtered on in queries. For instance, if your queries filter on "postalcode" often that could be a good partition key.')]),e._v(" "),o("img",{attrs:{src:e.$withBase("/files/119choice.png"),width:"75%"}}),e._v(" "),o("h4",{attrs:{id:"conclusion"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#conclusion"}},[e._v("#")]),e._v(" Conclusion")]),e._v(" "),o("p",[e._v("When you choose the right partition key for your "),o("a",{attrs:{href:"https://docs.microsoft.com/azure/cosmos-db/introduction?WT.mc_id=docs-azuredevtips-azureappsdev",target:"_blank",rel:"noopener noreferrer"}},[e._v("Azure Cosmos DB container"),o("OutboundLink")],1),e._v(", you optimize performance. Try it out!")])])}),[],!1,null,null,null);t.default=a.exports}}]);